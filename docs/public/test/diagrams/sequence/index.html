<!DOCTYPE html>
<html lang="ru">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º (LMS)">
    
    <title>
        
            Sequence-–¥–∏–∞–≥—Ä–∞–º–º–∞ testing | LMS Documentation
        
    </title>

    
    
    
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose'
        });
    </script>
    
    
    
    <link rel="stylesheet" href="/css/custom.css">
    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <div class="site-wrapper">
        
        <header class="site-header">
    <div class="header-container">
        <div class="logo">
            <a href="/" class="logo-link">
                <span class="logo-icon">üìö</span>
                <span class="logo-text">LMS Docs</span>
            </a>
        </div>
        
        <nav class="main-nav">
            <ul class="nav-list">
                
                <li class="nav-item ">
                    <a href="/" class="nav-link">
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                </li>
                
                <li class="nav-item ">
                    <a href="/public/" class="nav-link">
                        Public
                    </a>
                </li>
                
                <li class="nav-item ">
                    <a href="/admin/" class="nav-link">
                        Admin
                    </a>
                </li>
                
                <li class="nav-item ">
                    <a href="/test/" class="nav-link">
                        Test
                    </a>
                </li>
                
                <li class="nav-item ">
                    <a href="/account/" class="nav-link">
                        –õ–ö
                    </a>
                </li>
                
            </ul>
        </nav>
        
        <button class="mobile-menu-toggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>
        
        
        <main class="main-content">
            
<div class="page-content">
    <div class="breadcrumbs">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a> 
        
            
                ‚Üí <a href="/test/">Test</a>
            
            
            ‚Üí Sequence-–¥–∏–∞–≥—Ä–∞–º–º–∞ testing
        
    </div>
    
    <h1>Sequence-–¥–∏–∞–≥—Ä–∞–º–º–∞ testing</h1>
    
    <div class="content">
        <div class="mermaid">
    

sequenceDiagram
    actor User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Nginx as Nginx
    participant Keycloak as Keycloak
    participant Router as Router
    participant Auth as JwtHandler
    participant Controller as Controller
    participant Service as Service
    participant Repository as Repository
    participant DB as Database

    Note over User,Keycloak: –≠—Ç–∞–ø 1: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    User->>Keycloak: 1. –û—Ç–ø—Ä–∞–≤–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    Keycloak-->>User: 2. –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

    Note over User,DB: –≠—Ç–∞–ø 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
    User->>Nginx: 3. HTTP –∑–∞–ø—Ä–æ—Å + JWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
    Nginx->>Router: 4. –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥

    Router->>Auth: 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ JWT (–ª–æ–∫–∞–ª—å–Ω–æ —Å –∫—ç—à–µ–º)
    alt –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
        Auth-->>Router: 401 Unauthorized
        Router-->>Nginx: HTTP 401
        Nginx-->>User: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
    else –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π
        Auth-->>Router: Claims (userId, roles, ‚Ä¶)

        Router->>Controller: 6. –í—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
        Note right of Controller: –ü–∞—Ä—Å–∏–Ω–≥ JSON ‚Üí Request DTO<br/>–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

        Controller->>Service: 7. –í—ã–∑–æ–≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
        Note right of Service: –ú–∞–ø–ø–∏–Ω–≥ DTO ‚Üí Domain Model<br/>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

        Service->>Repository: 8. –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
        Repository->>DB: 9. SQL –∑–∞–ø—Ä–æ—Å

        alt –û—à–∏–±–∫–∞ –ë–î
            DB-->>Repository: –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è/–∑–∞–ø—Ä–æ—Å–∞
            Repository-->>Service: –û—à–∏–±–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
            Service-->>Controller: –û—à–∏–±–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
            Controller-->>Router: HTTP 500
            Router-->>Nginx: Internal Server Error
            Nginx-->>User: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
        else –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
            DB-->>Repository: 10. –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
            Repository-->>Service: 11. Domain Model

            Note right of Service: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞<br/>–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

            Service->>Repository: 12. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
            Repository->>DB: 13. UPDATE/INSERT –∑–∞–ø—Ä–æ—Å
            DB-->>Repository: 14. –£—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
            Repository-->>Service: 15. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å

            Note right of Service: –ú–∞–ø–ø–∏–Ω–≥ Model ‚Üí Response DTO<br/>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞

            Service-->>Controller: 16. Response DTO
            Note right of Controller: –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è DTO ‚Üí JSON
            Controller-->>Router: 17. HTTP 200 + JSON/HTML
            Router-->>Nginx: 18. HTTP Response
            Nginx-->>User: 19. –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
        end
    end

</div>

    </div>
    
    
    
    <div class="section-links">
        <h3>–†–∞–∑–¥–µ–ª—ã Test:</h3>
        <div class="section-grid">
            <a href="/test/documentation" class="section-card">
                <span class="icon">üìÑ</span>
                <span class="title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</span>
                <span class="desc">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞</span>
            </a>
            
            <a href="/test/diagrams/" class="section-card">
                <span class="icon">üìà</span>
                <span class="title">–î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</span>
                <span class="desc">Flowchart, Sequence, User Journey</span>
            </a>
        </div>
    </div>
    
    
    <div class="navigation">
        
        <a href="//localhost:1313/test/diagrams/er/" class="nav-prev">‚Üê ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è —Å—Ö–µ–º—ã testing</a>
        
        
        
        <a href="/test/" class="nav-home">‚Üë –ö —Ä–∞–∑–¥–µ–ª—É Test</a>
        
        
        
    </div>
</div>

        </main>
        
        
        <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-content">
            <p>LMS Documentation ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="update-date">11.1223.232311</span></p>
            <p class="footer-copyright">¬© 232311 LMS Project. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </div>
</footer>
    </div>
    
    
    <script>
        
        document.addEventListener('DOMContentLoaded', function() {
            const updateDateElement = document.getElementById('update-date');
            if (updateDateElement) {
                const now = new Date();
                const formattedDate = now.toLocaleDateString('ru-RU', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                updateDateElement.textContent = formattedDate;
            }
        });
    </script>
</body>
</html>