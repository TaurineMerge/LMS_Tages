# --- Database (connect to in-docker Postgres instance) ---
DATABASE_HOST=app-db
DATABASE_PORT=5432
# Название БД, с которой должен работать personal-account
DATABASE_NAME=personal_account_prod
DATABASE_USER=pa_user
DATABASE_PASSWORD=replace_with_strong_personal_account_password
DATABASE_POOL_MIN_SIZE=5
DATABASE_POOL_MAX_SIZE=20

# Оставляем старые PERSONAL_ACCOUNT_* переменные (если нужны для init), но приложение использует DATABASE_*
PERSONAL_ACCOUNT_DB_NAME=personal_account_prod
PERSONAL_ACCOUNT_DB_USER=pa_user
PERSONAL_ACCOUNT_DB_PASSWORD=replace_with_strong_personal_account_password

# API
API_PREFIX=/api/v1

# OpenTelemetry - Core
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=personal-account-api
OTEL_EXPORTER_OTLP_INSECURE=true

# OpenTelemetry - Sampling (1.0 = 100%, 0.1 = 10%)
OTEL_TRACES_SAMPLER_ARG=1.0

# OpenTelemetry - Span limits
OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT=128
OTEL_SPAN_EVENT_COUNT_LIMIT=128
OTEL_SPAN_LINK_COUNT_LIMIT=128
OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT=4096

# OpenTelemetry - Export config
OTEL_EXPORTER_OTLP_TIMEOUT=30000
OTEL_BSP_MAX_EXPORT_BATCH_SIZE=512
OTEL_BSP_SCHEDULE_DELAY=5000
OTEL_BSP_MAX_QUEUE_SIZE=2048

# OpenTelemetry - Feature flags
OTEL_ENABLE_CONSOLE_EXPORTER=false
OTEL_ENABLE_LOGGING=true
OTEL_ENABLE_SQLALCHEMY=true
OTEL_ENABLE_HTTPX=true
OTEL_EXCLUDED_URLS=/health,/metrics

# Keycloak Configuration  
# internal (used by service to talk to keycloak inside docker network)
KEYCLOAK_SERVER_URL=http://keycloak:8080/auth/
KEYCLOAK_PUBLIC_URL=http://localhost/auth

KEYCLOAK_PUBLIC_URL=http://localhost:80/auth
KEYCLOAK_REALM=student
KEYCLOAK_CLIENT_ID=student-client
KEYCLOAK_CLIENT_SECRET=STUDENT_SECRET
KEYCLOAK_REDIRECT_URI=http://localhost/account/callback

KEYCLOAK_ADMIN_REALM=teacher
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_DEFAULT_SCOPE=openid profile email
KEYCLOAK_USER_EMAIL_VERIFIED_DEFAULT=true

# Environment (production | development | local)
# production/development - запуск в контейнере с nginx proxy (/account prefix)
# local - локальный запуск без nginx (без prefix)
ENVIRONMENT=production

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_CACHE_TTL=1800

# Stats Worker
STATS_WORKER_FETCH_INTERVAL=60
STATS_WORKER_PROCESS_INTERVAL=15

TESTING_BASE_URL=http://testing:8085
