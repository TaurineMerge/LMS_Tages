# =============================================================================
# PERSONAL ACCOUNT API - ENVIRONMENT CONFIGURATION
# =============================================================================
#
# ПЕРЕКЛЮЧЕНИЕ ОКРУЖЕНИЙ:
# -----------------------
# 1. Для ЛОКАЛЬНОЙ разработки (Python debug, без nginx):
#    - Создай файл .env.local (копируй из этого примера)
#    - Установи ENVIRONMENT=local
#    - Запусти: docker compose -f docker-compose-dev-py.yml up -d
#    - Запусти Python: poetry run uvicorn main:app --reload --port 8000
#
# 2. Для PRODUCTION/STAGING (в контейнере с nginx):
#    - Используй .env с ENVIRONMENT=production
#    - Запусти: docker compose up -d
#
# ПРИОРИТЕТ: .env.local перезаписывает .env (если оба существуют)
# =============================================================================

# --- Environment Mode ---
# local      - локальная разработка (без nginx prefix, статика по /static)
# development - dev контейнер (с nginx prefix /account)
# production  - prod контейнер (с nginx prefix /account)
ENVIRONMENT=local

# --- Debug ---
DEBUG=true

# --- Database ---
DATABASE_HOST=localhost          # local: localhost | docker: app-db
DATABASE_PORT=5432
DATABASE_NAME=personal_account_prod
DATABASE_USER=pa_user
DATABASE_PASSWORD=replace_with_strong_personal_account_password
DATABASE_POOL_MIN_SIZE=5
DATABASE_POOL_MAX_SIZE=20

# --- Redis ---
REDIS_HOST=localhost             # local: localhost | docker: redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_CACHE_TTL=1800

# --- Keycloak ---
# local:  http://localhost:8080/auth
# docker: http://keycloak:8080/auth (internal) + http://localhost:80/auth (public)
KEYCLOAK_SERVER_URL=http://localhost:8080/auth
KEYCLOAK_PUBLIC_URL=http://localhost:8080/auth
KEYCLOAK_REALM=student
KEYCLOAK_CLIENT_ID=student-client
KEYCLOAK_CLIENT_SECRET=STUDENT_SECRET
KEYCLOAK_REDIRECT_URI=http://localhost:8000/callback  # local: :8000 | docker: /account/callback
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# --- OpenTelemetry ---
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317  # local: localhost | docker: otel-collector
OTEL_SERVICE_NAME=personal-account-api
OTEL_EXPORTER_OTLP_INSECURE=true

# --- Testing Service ---
TESTING_BASE_URL=http://localhost:8085  # local: localhost | docker: testing
