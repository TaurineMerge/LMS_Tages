<!-- templates/pages/lesson-form.hbs -->
<div class="admin-page admin-page--full">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="admin-content admin-content--full">
        {{#if error}}
            <div class="notification notification--error">
                <span class="notification__icon">‚ö†Ô∏è</span>
                <span class="notification__text">{{error}}</span>
            </div>
        {{/if}}

        <div class="form-card">
            <div class="form-card__header">
                <nav class="form-breadcrumb">
                    <a href="/admin/categories" class="form-breadcrumb__link">üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
                    <span class="form-breadcrumb__separator">‚Ä∫</span>
                    <a href="/admin/categories/{{categoryID}}/courses" class="form-breadcrumb__link">{{categoryName}}</a>
                    <span class="form-breadcrumb__separator">‚Ä∫</span>
                    <a href="/admin/categories/{{categoryID}}/courses/{{courseID}}/lessons" class="form-breadcrumb__link">{{courseName}}</a>
                    <span class="form-breadcrumb__separator">‚Ä∫</span>
                    <span>{{#if lesson}}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{{else}}–ù–æ–≤—ã–π —É—Ä–æ–∫{{/if}}</span>
                </nav>
                <h1 class="form-card__title">
                    {{#if lesson}}‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫{{else}}üìù –ù–æ–≤—ã–π —É—Ä–æ–∫{{/if}}
                </h1>
                <p class="form-card__subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Ä–æ–∫–µ</p>
            </div>

            {{#if lesson}}
            <div class="form-info-bar">
                <div class="form-info-bar__item">
                    <span class="form-info-bar__label">ID:</span>
                    <span class="form-info-bar__value">{{lesson.ID}}</span>
                </div>
                <div class="form-info-bar__item">
                    <span class="form-info-bar__label">–°–æ–∑–¥–∞–Ω:</span>
                    <span class="form-info-bar__value">{{lesson.CreatedAt}}</span>
                </div>
                <div class="form-info-bar__item">
                    <span class="form-info-bar__label">–û–±–Ω–æ–≤–ª–µ–Ω:</span>
                    <span class="form-info-bar__value">{{lesson.UpdatedAt}}</span>
                </div>
            </div>
            {{/if}}

            <form method="POST" 
                  action="{{#if lesson}}/admin/categories/{{categoryID}}/courses/{{courseID}}/lessons/{{lesson.ID}}/update{{else}}/admin/categories/{{categoryID}}/courses/{{courseID}}/lessons/create{{/if}}" 
                  class="modern-form">
                
                <div class="form-section">
                    <div class="form-field">
                        <label for="title" class="form-field__label">
                            <span class="form-field__label-icon">üìù</span>
                            –ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
                            <span class="form-field__required">*</span>
                        </label>
                        <div class="form-field__input-wrapper">
                            <input 
                                type="text" 
                                id="title" 
                                name="title" 
                                class="form-field__input" 
                                value="{{#if lesson}}{{lesson.Title}}{{/if}}"
                                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ–º—É"
                                required
                                autofocus
                            />
                            <span class="form-field__input-icon">‚úì</span>
                        </div>
                        <p class="form-field__hint">–ö—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞</p>
                    </div>

                    <div class="form-field">
                        <label for="lesson-content-editor" class="form-field__label">
                            <span class="form-field__label-icon">üìÑ</span>
                            –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞
                        </label>
                        <p class="form-field__hint" style="margin-bottom: 12px;">
                            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Å–ø–∏—Å–∫–æ–≤
                        </p>
                        <div class="wysiwyg-editor">
                            <div id="wysiwyg-toolbar" class="wysiwyg-toolbar"></div>
                            <div id="lesson-content-editor" class="wysiwyg-editor__content">{{#if lesson}}{{{lesson.HTMLContent}}}{{/if}}</div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <a href="/admin/categories/{{categoryID}}/courses/{{courseID}}/lessons" class="btn btn--secondary">
                        <span class="btn__icon">‚úï</span>
                        –û—Ç–º–µ–Ω–∞
                    </a>
                    <button type="submit" class="btn btn--primary">
                        <span class="btn__icon">{{#if lesson}}üíæ{{else}}Ôºã{{/if}}</span>
                        {{#if lesson}}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{{else}}–°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫{{/if}}
                    </button>
                </div>
            </form>
        </div>
    </main>
</div>
