<div class="page-header">
    <div class="page-header__breadcrumbs">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <span class="page-header__separator">/</span>
        <a href="/categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
        <span class="page-header__separator">/</span>
        <span>{{CategoryTitle}}</span>
    </div>
    <h1 class="page-header__title">{{CategoryTitle}}</h1>
</div>

<div class="courses">
    <div class="courses__header">
        <h2 class="courses__subtitle">
            {{#if Courses}}
                –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã ({{Pagination.Total}})
            {{else}}
                –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
            {{/if}}
        </h2>
        <div class="courses__filters">
            <form method="GET" action="/categories/{{CategoryID}}/courses" class="filters-form">
                <div class="filter-group">
                    <label for="level-filter">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
                    <select name="level" id="level-filter" onchange="this.form.submit()">
                        <option value="all" {{#if (streq Level "all")}}selected{{/if}}>–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        <option value="easy" {{#if (streq Level "easy")}}selected{{/if}}>–õ–µ–≥–∫–∏–π</option>
                        <option value="medium" {{#if (streq Level "medium")}}selected{{/if}}>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="hard" {{#if (streq Level "hard")}}selected{{/if}}>–°–ª–æ–∂–Ω—ã–π</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sort-filter">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select name="sort_by" id="sort-filter" onchange="this.form.submit()">
                        <option value="updated_desc" {{#if (streq SortBy "updated_desc")}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                        <option value="updated_asc" {{#if (streq SortBy "updated_asc")}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                    </select>
                </div>
                <input type="hidden" name="page" value="{{CurrentPage}}">
            </form>
        </div>
    </div>

    {{#if Courses}}
        <div class="courses__grid">
            {{#each Courses}}
                <div class="course-card">
                    <div class="course-card__image">üìñ</div>
                    <div class="course-card__content">
                        <div class="course-card__meta">
                            {{#if LevelRu}}
                            <span class="course-card__level course-card__level--{{#if (streq Level "easy")}}easy{{else}}{{#if (streq Level "hard")}}hard{{else}}medium{{/if}}{{/if}}">
                                {{LevelRu}}
                            </span>
                            {{/if}}
                        </div>
                        <h3 class="course-card__title">{{Title}}</h3>
                        <p class="course-card__description">{{#if Description}}{{truncate Description 150}}{{else}}–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.{{/if}}</p>
                        <div class="course-card__stats">
                            <div class="course-card__stat">
                                <span>üìö</span>
                                <span>10 —É—Ä–æ–∫–æ–≤</span>
                            </div>
                            <div class="course-card__stat">
                                <span>‚è±Ô∏è</span>
                                <span>20 —á–∞—Å–æ–≤</span>
                            </div>
                        </div>
                    </div>
                    <div class="course-card__footer">
                        <a href="/categories/{{../CategoryID}}/courses/{{ID}}" class="button button--primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                    </div>
                </div>
            {{/each}}
        </div>

        {{#if Pagination}}
        {{#if (gt Pagination.Pages 1)}}
        <div class="pagination">
            {{#if (gt CurrentPage 1)}}
                <a href="/categories/{{CategoryID}}/courses?page={{subtract CurrentPage 1}}&level={{Level}}&sort_by={{SortBy}}" class="pagination__btn">‚Üê –ù–∞–∑–∞–¥</a>
            {{/if}}

            <div class="pagination__pages">
                {{#each (range 1 Pagination.Pages)}}
                    {{#if (eq this ../CurrentPage)}}
                        <a href="/categories/{{../CategoryID}}/courses?page={{this}}&level={{../Level}}&sort_by={{../SortBy}}" class="pagination__page pagination__page--active">{{this}}</a>
                    {{else}}
                        <a href="/categories/{{../CategoryID}}/courses?page={{this}}&level={{../Level}}&sort_by={{../SortBy}}" class="pagination__page">{{this}}</a>
                    {{/if}}
                {{/each}}
            </div>

            {{#if (lt CurrentPage Pagination.Pages)}}
                <a href="/categories/{{CategoryID}}/courses?page={{add CurrentPage 1}}&level={{Level}}&sort_by={{SortBy}}" class="pagination__btn">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
            {{/if}}
        </div>
        {{/if}}
        {{/if}}
    {{else}}
        <div class="empty-state">
            <div class="empty-state__icon">üì≠</div>
            <h2 class="empty-state__title">–ö—É—Ä—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h2>
            <p class="empty-state__text">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.</p>
        </div>
    {{/if}}
</div>
