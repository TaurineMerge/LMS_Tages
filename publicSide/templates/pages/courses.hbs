{{> partials/page_header PageHeader}}

<div class="courses">
    <div class="courses__header">
        <h2 class="courses__subtitle">
            {{#if Courses}}
                –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã ({{Pagination.Total}})
            {{else}}
                –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
            {{/if}}
        </h2>
        <div class="courses__filters">
            <form method="GET" action="/categories/{{CategoryID}}/courses" class="filters-form">
                <div class="filter-group">
                    <label for="level-filter">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
                    <select name="level" id="level-filter" onchange="this.form.submit()">
                        <option value="all" {{#if (streq Level "all")}}selected{{/if}}>–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        <option value="easy" {{#if (streq Level "easy")}}selected{{/if}}>–õ–µ–≥–∫–∏–π</option>
                        <option value="medium" {{#if (streq Level "medium")}}selected{{/if}}>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="hard" {{#if (streq Level "hard")}}selected{{/if}}>–°–ª–æ–∂–Ω—ã–π</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sort-filter">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select name="sort_by" id="sort-filter" onchange="this.form.submit()">
                        <option value="updated_desc" {{#if (streq SortBy "updated_desc")}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                        <option value="updated_asc" {{#if (streq SortBy "updated_asc")}}selected{{/if}}>–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                    </select>
                </div>
                <input type="hidden" name="page" value="{{CurrentPage}}">
            </form>
        </div>
    </div>

    {{#if Courses}}
        <div class="courses__grid">
            {{#each Courses}}
                {{> partials/course-card CategoryID=../CategoryID}}
            {{/each}}
        </div>

        {{#if Pagination}}
        {{#if (gt Pagination.Pages 1)}}
        <div class="pagination">
            {{#if (gt CurrentPage 1)}}
                <a href="/categories/{{../CategoryID}}/courses?page={{subtract CurrentPage 1}}&level={{../Level}}&sort_by={{../SortBy}}" class="pagination__btn">‚Üê –ù–∞–∑–∞–¥</a>
            {{/if}}

            <div class="pagination__pages">
                {{#each (range 1 Pagination.Pages)}}
                    {{#if (eq this ../CurrentPage)}}
                        <a href="/categories/{{../../CategoryID}}/courses?page={{this}}&level={{../../Level}}&sort_by={{../../SortBy}}" class="pagination__page pagination__page--active">{{this}}</a>
                    {{else}}
                        <a href="/categories/{{../../CategoryID}}/courses?page={{this}}&level={{../../Level}}&sort_by={{../../SortBy}}" class="pagination__page">{{this}}</a>
                    {{/if}}
                {{/each}}
            </div>

            {{#if (lt CurrentPage Pagination.Pages)}}
                <a href="/categories/{{../CategoryID}}/courses?page={{add CurrentPage 1}}&level={{../Level}}&sort_by={{../SortBy}}" class="pagination__btn">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
            {{/if}}
        </div>
        {{/if}}
        {{/if}}
    {{else}}
        <div class="empty-state">
            <div class="empty-state__icon">üì≠</div>
            <h2 class="empty-state__title">–ö—É—Ä—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h2>
            <p class="empty-state__text">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.</p>
        </div>
    {{/if}}
</div>
