# knowledge-base-test-data-generator

Утилита на Go для генерации тестовых данных в виде SQL-запросов `INSERT` для базы данных `knowledge_base`, используя Ollama для создания содержательного контента.

## Возможности

*   **Гибкая конфигурация:** Настраиваемое количество категорий, курсов, уроков и блоков контента через YAML-файл.
*   **Генерация контента через Ollama:** Названия, описания и текстовое содержимое уроков генерируются с помощью указанной модели Ollama.
*   **Автоматическая генерация данных:** Создание UUID, реалистичных временных меток (`created_at`, `updated_at`) и связей между сущностями.
*   **Вывод в SQL:** Результат работы — один `.sql` файл с готовыми `INSERT` запросами.

## Требования

*   **Go:** Версия 1.22+ (или текущая стабильная).
*   **Docker:** Для запуска Ollama.
*   **Ollama:** Запущенный локально инстанс Ollama с загруженной моделью (например, `llama3`).

## Настройка Ollama

Перед запуском генератора убедитесь, что у вас установлен и запущен Ollama, и что в нем загружена необходимая модель.

1.  **Запуск Ollama через Docker (рекомендуется):**
    ```bash
    docker run -d -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama
    ```

2.  **Запуск Ollama локально (если уже установлен):**
    Если Ollama уже установлен на вашей системе и модель загружена, вы можете запустить ее напрямую:
    ```bash
    ollama run llama3
    ```
    *Убедитесь, что модель, указанная в `config.yml` (параметр `ollama_model`), соответствует загруженной.*

3.  **Загрузка модели (если не загружена, для Docker/локальной установки):**
    ```bash
    ollama pull llama3 # или docker exec -it ollama ollama pull llama3 если используется Docker
    ```
    *Убедитесь, что модель, указанная в `config.yml` (параметр `ollama_model`), соответствует загруженной.*

## Конфигурация утилиты

Настройки генерации определяются в YAML-файле. Пример конфигурации находится в `config.example.yml`.

1.  **Скопируйте пример:**
    ```bash
    cp config.example.yml config.yml
    ```
2.  **Отредактируйте `config.yml`** в соответствии с вашими потребностями. Основные параметры:
    *   `output`: Путь к выходному SQL-файлу.
    *   `ollama_url`: URL вашего Ollama-инстанса (по умолчанию `http://localhost:11434`).
    *   `ollama_model`: Модель Ollama для использования (по умолчанию `llama3`).
    *   `counts.categories`, `counts.courses`, `counts.lessons`, `counts.content_blocks`: Количество генерируемых сущностей. Можно указать точное число (например, `5`) или диапазон (например, `"2:6"`).

## Запуск генератора

1.  **Перейдите в директорию утилиты:**
    ```bash
    cd utils/knowledge-base-test-data-generator
    ```
2.  **Установите зависимости:**
    ```bash
    go mod tidy
    ```
3.  **Запустите генератор:**
    ```bash
    go run ./cmd/generator/main.go -config config.yml
    ```
    *Если `config.yml` находится в другом месте, укажите полный путь к нему.*

## Выходной файл

После успешного выполнения утилита создаст SQL-файл по пути, указанному в параметре `output` вашего `config.yml`. Этот файл будет содержать `INSERT` запросы, которые можно выполнить для наполнения вашей базы данных.
